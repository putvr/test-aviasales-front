(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){e.exports=a.p+"static/media/logo.d8a27482.svg"},135:function(e,t,a){e.exports=a.p+"static/media/checklistDisabled.09a16878.svg"},136:function(e,t,a){e.exports=a.p+"static/media/checklistEnabled.41628eb9.svg"},137:function(e,t,a){e.exports=a.p+"static/media/TA.382387ab.svg"},138:function(e,t,a){e.exports=a.p+"static/media/arrow.c7491c9a.svg"},139:function(e,t,a){e.exports=a(360)},348:function(e,t,a){},350:function(e,t,a){},352:function(e,t,a){},354:function(e,t,a){},356:function(e,t,a){},358:function(e,t,a){},360:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(133),l=a.n(r),s=a(66),i=a(67),o=a(69),m=a(68),d=a(70),u=(a(144),a(146),a(348),a(134)),v=a.n(u),p=function(){return c.a.createElement("header",{className:"col text-center"},c.a.createElement("div",null,c.a.createElement("img",{src:v.a,alt:""})))},E=function(e){return c.a.createElement("div",{className:"container App"},c.a.createElement("div",{className:"row Header"},c.a.createElement(p,null)),c.a.createElement("main",null,e.children))},f=a(50),k=(a(350),a(352),function(e){return c.a.createElement("div",{className:"btn-group col-sm pl-0",role:"group"},e.currencyList.map(function(t,a){return c.a.createElement("button",{className:"btn btn-secondary CurrencyFilter".concat(t.active?" activeButton":""),type:"button",onClick:function(){return e.currencySelectedHandler(a)},key:a},t.name)}))}),N=(a(354),a(135)),b=a.n(N),y=a(136),g=a.n(y),h=function(e){return c.a.createElement("ul",{className:"list-group list-group-flush TransferFilter"},e.transfersList.map(function(t){return c.a.createElement("li",{className:"list-group-item pl-0",key:t.id,onClick:function(){return e.transferSelectedHandler(t.id)}},c.a.createElement("img",{src:"".concat(t.selected?g.a:b.a),alt:"",className:"img-fluid"}),c.a.createElement("span",null,t.name))}))},w=function(e){return c.a.createElement("div",{className:"col-lg-3 mb-3"},c.a.createElement("div",{className:"container rounded border-white Sidebar"},c.a.createElement("div",{className:"raw no-gutters pt-3"},c.a.createElement("div",{className:"col pb-2"},c.a.createElement("span",null,"\u0412\u0410\u041b\u042e\u0422\u0410")),c.a.createElement("div",{className:"col"},c.a.createElement(k,{currencyList:e.currencyList,currencySelectedHandler:e.currencySelectedHandler}))),c.a.createElement("div",{className:"raw no-gutters pt-3 pb-3"},c.a.createElement("div",{className:"col"},c.a.createElement("span",null,"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a")),c.a.createElement("div",{className:"col"},c.a.createElement(h,{transfersList:e.transfersList,transferSelectedHandler:e.transferSelectedHandler})))))},L=(a(356),a(137)),S=a.n(L),_=a(138),O=a.n(_),j=function(e){return c.a.createElement("div",{className:"container rounded Ticket mb-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-4 TicketInfo pb-3"},c.a.createElement("div",{className:"container pt-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm text-center"},c.a.createElement("img",{src:S.a,className:"pb-3",alt:""})),c.a.createElement("div",{className:"w-100"}),c.a.createElement("div",{className:"col-sm text-center"},c.a.createElement("button",{className:"btn"},"\u041a\u0443\u043f\u0438\u0442\u044c",c.a.createElement("br",null),"\u0437\u0430 ",e.ticket.price_currency))))),c.a.createElement("div",{className:"col-sm-8"},c.a.createElement("div",{className:"container pb-3"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 col-ld-5 pt-3"},c.a.createElement("div",{className:"col-sm FontLeft FontTime"},e.ticket.departure_time),c.a.createElement("div",{className:"col-sm FontLeft FontCity"},e.ticket.origin,", ",e.ticket.origin_name," ",c.a.createElement("br",null),e.ticket.departure_date,", ",e.ticket.departure_date_day)),c.a.createElement("div",{className:"col-md-4 col-ld-2 pt-3"},c.a.createElement("div",{className:"col-sm text-center TicketStops"},c.a.createElement("div",null,e.ticket.stops_count?e.ticket.stops_count:"\xa0"),c.a.createElement("img",{className:"img-fluid",src:O.a,alt:""}))),c.a.createElement("div",{className:"col-md-4 col-ld-5 pt-3"},c.a.createElement("div",{className:"col-sm FontLeft TicketArrival FontTime"},e.ticket.arrival_time),c.a.createElement("div",{className:"col-sm FontLeft FontCity"},e.ticket.destination,", ",e.ticket.destination_name," ",c.a.createElement("br",null),e.ticket.arrival_date,", ",e.ticket.arrival_date_day)))))))},H=(a(358),function(){return c.a.createElement("div",{className:"lds-roller"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}),x=function(e){return e.showError?c.a.createElement("div",{className:"alert alert-danger col-md-8",role:"alert"},"Network error!  ",c.a.createElement("a",{href:"/",className:"alert-link"},"Reload the page!")):e.ticketsLoading?c.a.createElement("div",{className:"col-md-8 text-center text"},c.a.createElement(H,null)):c.a.createElement("div",{className:"col-lg-9"},e.tickets.map(function(e,t){return e.visible?c.a.createElement(j,{ticket:e,key:t}):""}))},F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(c)))).state={ticketsLoading:!1,tickets:[],showError:!1,transfersList:[{id:0,name:"\u0412\u0441\u0435",selected:!0,count:""},{id:1,name:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",selected:!1,count:0},{id:2,name:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",selected:!1,count:1},{id:3,name:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",selected:!1,count:2},{id:4,name:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",selected:!1,count:3}],currencyList:[{name:"RUB",code:"\u20bd",active:!0,value:1},{name:"USD",code:"$",active:!1,value:70},{name:"EUR",code:"\u20ac",active:!1,value:80}]},a.transferSelectedHandler=function(e){var t=Object(f.a)(a.state.transfersList),n=Object(f.a)(a.state.tickets);0!==e||t[0].selected?(t[0].selected=!1,t[e].selected=!t[e].selected):(t.map(function(e){return e.selected=!1}),t[0].selected=!0),n.map(function(a){var n=!1;return t.forEach(function(e){e.selected&&a.stops===e.count&&(n=!0)}),0===e&&(n=!0),a.visible=n}),a.setState({transfersList:t,tickets:n})},a.currencySelectedHandler=function(e){var t=Object(f.a)(a.state.currencyList),n=Object(f.a)(a.state.tickets);t.map(function(e){return e.active=!1}),t[e].active=!0,n.map(function(e){var a=t.find(function(e){return e.active});return e.price_currency="".concat((e.price/a.value).toFixed(2)," ").concat(a.code)}),a.setState({currencyList:t,tickets:n})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getDayOfWeek",value:function(e){var t=new Date;return t.setFullYear("20"+e.split(".")[2],e.split(".")[1]-1,e.split(".")[0]),["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"][t.getDay()-1]}},{key:"getTicketsData",value:function(){var e=this;this.setState({ticketsLoading:!0});var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET","https://raw.githubusercontent.com/KosyanMedia/test-tasks/master/aviasales/tickets.json",!0),t.onload=function(){if(200===t.status){var a=JSON.parse(t.response);(a=a.tickets.sort(function(e,t){return e.price-t.price})).map(function(t){var a;switch(t.stops){case 0:a="";break;case 1:a="1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";break;default:a=t.stops+" \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}return t.stops_count=a,t.departure_date_day=e.getDayOfWeek(t.departure_date),t.arrival_date_day=e.getDayOfWeek(t.arrival_date),t.visible=!0,t.price_currency="".concat(t.price," \u20bd")}),e.setState({tickets:a,ticketsLoading:!1})}else e.setState({showError:!0})},t.onerror=function(){e.setState({showError:!0})},t.send(null)}},{key:"componentWillMount",value:function(){this.getTicketsData()}},{key:"render",value:function(){return c.a.createElement("div",{className:"row"},c.a.createElement(w,{transfersList:this.state.transfersList,currencyList:this.state.currencyList,transferSelectedHandler:this.transferSelectedHandler,currencySelectedHandler:this.currencySelectedHandler}),c.a.createElement(x,{tickets:this.state.tickets,ticketsLoading:this.state.ticketsLoading,showError:this.state.showError}))}}]),t}(n.Component),T=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return c.a.createElement(E,null,c.a.createElement(F,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[139,2,1]]]);
//# sourceMappingURL=main.80257766.chunk.js.map